<Window x:Class="Ksiegarnia.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Ksiegarnia.MarkupExtensions"
        Title="MainWindow" Height="850" Width="1100"
        WindowStartupLocation="Manual">
    <!-- Podział na pasek nagłówkowy (fixed) i główną zawartość (scrollowaną) -->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!-- Pasek górny (nagłówek z koszykiem) -->
            <RowDefinition Height="*" />
            <!-- Reszta zawartości -->
        </Grid.RowDefinitions>

        <!-- Pasek górny (nagłówek z przyciskiem koszyka) -->
        <StackPanel Grid.Row="0" VerticalAlignment="Top" Height="66">
            <StackPanel.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <GradientStop Color="#FF2C2C2C" Offset="0"/>
                    <GradientStop Color="#FF1F1F1F" Offset="1"/>
                </LinearGradientBrush>
            </StackPanel.Background>
            <StackPanel Width="182" HorizontalAlignment="Right" Orientation="Horizontal" Margin="0,5,25,0">
                <Button x:Name="itemsInCartCounter"
                Style="{StaticResource CartButtonStyle}"
                Content="0"
                Height="55"
                Width="61"
                Click="itemsInCartCounter_Click" />
            </StackPanel>
        </StackPanel>

        <!-- Główna zawartość z przewijaniem -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
            <Grid Margin="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <!-- Powitanie i wyszukiwarka -->
                    <RowDefinition Height="Auto" />
                    <!-- Obszar reklamy (Image + ukryta lista) -->
                    <RowDefinition Height="Auto" />
                    <!-- Nagłówek i losowe książki -->
                </Grid.RowDefinitions>

                <!-- Row 0: Powitanie i wyszukiwarka -->
                <StackPanel Grid.Row="0"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"
                    Margin="0,20,0,0"
                    Width="980"      
                    MinWidth="980">
                    <TextBlock Text="Witaj, Jan!" 
                     Style="{StaticResource HeaderTextStyle}" 
                     HorizontalAlignment="Center" 
                     Margin="10,20,10,22" 
                     FontFamily="Britannic Bold" 
                     VerticalAlignment="Center" 
                     FontSize="30" />
                    <TextBlock Text="Wyszukaj książkę..." 
                     Style="{StaticResource PlaceholderTextStyle}" 
                     HorizontalAlignment="Left" 
                     Margin="55,0,0,5" />
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBox x:Name="SearchBox"
                     Style="{StaticResource SearchBoxStyle}"
                     TextChanged="SearchBox_TextChanged"
                     MinWidth="400"/>
                        <Button Style="{StaticResource CartActionButtonStyle}" 
                    Content="Wyszukaj" 
                    Width="89" 
                    FontWeight="Bold" 
                    FontSize="18"/>
                    </StackPanel>
                </StackPanel>

                <!-- Row 1: Obszar reklamy (Image + ukryta lista książek) -->
                <Grid Grid.Row="1">
                    <Image Source="{local:DynamicImageSource 'advertisement.png'}"
       Stretch="Fill"
       HorizontalAlignment="Center"
       Width="600"
       Height="250"
       Margin="0,25,0,0" />

                    <ListView x:Name="BooksList"
                    Visibility="Hidden"
                    Style="{StaticResource BooksListViewStyle}"
                    SelectionChanged="BooksList_SelectionChanged">
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel HorizontalAlignment="Center" />
                            </ItemsPanelTemplate>
                        </ListView.ItemsPanel>
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Border Style="{StaticResource BookItemStyle}">
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="{Binding Title}" 
                               Style="{StaticResource BookTitleStyle}" />
                                        <Image Source="{Binding CoverPath}" 
                           Width="150" Height="200" 
                           Stretch="Uniform" Margin="5" />
                                        <TextBlock Text="{Binding Author.FullName}" 
                               Style="{StaticResource AuthorTextStyle}" />
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </Grid>

                <!-- Row 2: Nagłówek i losowe książki -->
                <Grid Grid.Row="2" Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <TextBlock Text="Zobacz wybrane produkty" 
                     Style="{StaticResource HeaderTextStyle}" 
                     Grid.Row="0" />
                    <ListView x:Name="RandomBooks"
                    Grid.Row="1"
                    Style="{StaticResource BooksListViewStyle}"
                    SelectionChanged="RandomBooks_SelectionChanged">
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel HorizontalAlignment="Center" />
                            </ItemsPanelTemplate>
                        </ListView.ItemsPanel>
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Border Style="{StaticResource BookItemStyle}">
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="{Binding Title}" 
                               Style="{StaticResource BookTitleStyle}" />
                                        <Image Source="{Binding CoverPath}" 
                           Width="150" Height="200" 
                           Stretch="Uniform" Margin="5" />
                                        <TextBlock Text="{Binding Author.FullName}" 
                               Style="{StaticResource AuthorTextStyle}" />
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </Grid>
            </Grid>
        </ScrollViewer>
    </Grid>
</Window>
